{% extends "base.html" %}
{% block title %}Market {{ ticker }}{% endblock %}
{% block content %}
<h2 class="text-2xl font-bold mb-4">Market for {{ ticker }} - {{ asset_name }}</h2>

<div class="flex">
  <!-- Order Form -->
  <div class="w-1/3 mr-4 bg-white p-4 rounded shadow">
    <h3 class="font-bold mb-2">Place Order</h3>
    <form hx-post="/market/{{ ticker }}/order" hx-target="#order-form-message" hx-swap="innerHTML">
      <input type="hidden" name="ticker" value="{{ ticker }}" />
      <div class="mb-2">
        <label class="block text-sm">Side</label>
        <select name="side" class="w-full border p-2">
          <option value="BUY">Buy</option>
          <option value="SELL">Sell</option>
        </select>
      </div>
      <div class="mb-2">
        <label class="block text-sm">Price</label>
        <input type="number" step="0.01" name="price" class="w-full border p-2" required />
      </div>
      <div class="mb-2">
        <label class="block text-sm">Quantity</label>
        <input type="number" name="quantity" class="w-full border p-2" required />
      </div>
      <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded">Submit</button>
    </form>
    <div id="order-form-message" class="mt-2 text-sm text-green-600"></div>
  </div>
  <!-- Order Book -->
  <div class="w-2/3 bg-white p-4 rounded shadow">
    <h3 class="font-bold mb-2">Order Book</h3>
    <div hx-get="/api/market/{{ ticker }}/orders" hx-trigger="load, every 2s" hx-target="#order-book" hx-swap="innerHTML"></div>
    <div id="order-book"></div>
  </div>
</div>

{% endblock %}